webpackJsonp([1],{"4sbH":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAVCAYAAABc6S4mAAACxUlEQVRIS62TTaiUVRjH//9za3CMBLs7pWTmeYcGkciFJG77WHRdhCh9cY1qEy0kXAiCCuKi3CjlIqiodKFCRF8gRRFtgj5oUS0u1TnnnQmL4ipcE4Z79X3PP96pmSa9XBzvPavDeZ7n/3vO80EMjuSyGA8JeI7A5PD9Ri8SQP4B4Lg3OzYI4+Bi3h8heeBG9ZbyE7knNJsnKp8+4K5ud22tKH4VsBrSA8Hsi7FBhw+zOT39iAPeFfAnU9rgW62FPqCV5/uU0lEB54LZ1NjiIwFZjF9Buk/S0yHL3iakWyzGSODOBDwYzT5bDsC8f4zkGQDfe7N72QzhcQecFvBjMLtnOeL92JGEJd1PC+FLAtsIPPOL2VvLBgCwPN/HlI6C/IBZCAsAar16/bbf163rrQRg/czMZL1WuwDpcgWYAdBOwFQ0OzcAZN3uRhXFUyDrSOn9kGWfj8KzGHcJ2A7gUgLeyJvNHwb2RowbJqQOpAs07/eQfBnAX5JO0LkOgK2QdgO4dUT0U5EfsixrIHeB3DrcUbKkVCX3cQLWVOUm0JJ0qpoil+X5a5CevaY8V0W+ipRm4dxeSmuvsf9Wki+6lBognydQH7UL+HaiXn/4v03udLahKKZA3gEpL4rinW67nVdB2cWLazA3t1PSZpClgK+Tc+91Go35yr7+/PnJVfPzO+jcTkgPVc31jcYOkGkIWInmZjFOQzoF4E1v1q/IEFAZJR2sGhfNfh4A756dvb2cm1u1WAITZTn/U7t9eTgYSwHM+5MkdyfgiWhWbSKaIVQ1/IiAWwygqrllOeVbrU/6pVzyB96fxD+AJ6PZ6X8BW5x0VtWoLnII9CQ9GrLsu5sCjNuXsX+wooBBD0S+zrL8Zlzxvr9z1fJV03P9FJn3B0geuSnh64P2e7OX/jemG6XaQggvgGwsC0KG0Ou9gk2brlQ6fwM8K2Hp3j48DgAAAABJRU5ErkJggg=="},"Q+AC":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("mzKL"),s=n("x2bO"),a=n("7+uW"),r=(n("sVYa"),{data:function(){return{items:[],integralList:[],refreshText:"",height:"105%",noText:"没有啦～",params:{page:1,per_page:20},totalPoint:"",totalPage:1,isShowPointMall:!1,ajaxFlag:!1,showNoList:!1}},created:function(){this.changeTitle()},mounted:function(){s.a.backPhone=this.backPhone,this.getPermission()},methods:{goMall:function(){location.href="/integralMall"},getPermission:function(){var t=this;i.a.getPermission().then(function(e){200===e.status_code&&(t.isShowPointMall=1===e.data.student_point_mall)})},changeTitle:function(){var t=navigator.userAgent,e=t.indexOf("Android")>-1||t.indexOf("Linux")>-1,n=!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);e&&jsObj.changeTitle("我的积分"),n&&window.webkit.messageHandlers.jsObj.postMessage({key:"changeTitle",value:"我的积分"})},backPhone:function(){var t=navigator.userAgent,e=t.indexOf("Android")>-1||t.indexOf("Linux")>-1,n=!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);return e&&(jsObj.isFinishHomework&&jsObj.isFinishHomework(1),jsObj.finish()),n&&(window.webkit.messageHandlers.jsObj.postMessage({key:"isFinishHomework",value:"1"}),window.webkit.messageHandlers.jsObj.postMessage({key:"finish",value:""})),"success"},refresh:function(t){this.params.page=1,this.getPermission(),this.getStudentIntegral(t,"refresh")},getStudentIntegral:function(t,e){var n=this,s=this;i.a.getStudentIntegral(this.params).then(function(i){if("refresh"===e&&(s.integralList=[]),"Unauthorized"===i.statusText)return t(!0),void(s.noText="认证失败");if(200===i.status_code){var r=i.data;s.totalPoint=r.point,s.integralList=[].concat(s.integralList,r.data),s.totalPage=r.total_page,s.noText="没有啦～",1===s.totalPage&&s.integralList.length<10&&(s.noText="",t(!0)),1!==s.params.page||n.integralList.length?s.showNoList=!1:s.showNoList=!0,s.integralList.length&&s.integralList.forEach(function(t){if(!t.detail&&t.reason&&(t.detail=t.reason.split(",")[0]),t.detail){var e=t.detail.split(":")[0];e.length>25&&(t.detail=e.slice(0,24)+"...")}}),t(),s.params.page++}else s.noText="",a.a.toast(i.data.message),t(!0)})},infinite:function(t){this.$refs.my_scroller.finishPullToRefresh(),this.params.page>this.totalPage?t(!0):this.showNoList?t(!0):this.getStudentIntegral(t)}}}),o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{calss:"listWrapper"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showNoList,expression:"showNoList"}],staticClass:"nodata",on:{touchend:t.refresh}},[i("img",{attrs:{src:n("sjts")}}),t._v(" "),i("p",[t._v("您暂时还没有获得积分哦～")])]),t._v(" "),i("scroller",{ref:"my_scroller",staticClass:"scroll-container",staticStyle:{"padding-top":"44px"},attrs:{height:t.height,"on-refresh":t.refresh,"on-infinite":t.infinite,noDataText:t.noText,snapping:!0}},[i("div",{staticClass:"nav-bar"},[i("p",[t._v("拥有积分")]),t._v(" "),i("p",[t._v(t._s(t.totalPoint)),i("span",{staticStyle:{"margin-left":"3px"}},[t._v("个")])])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowPointMall,expression:"isShowPointMall"}],staticClass:"point_mall_router",on:{click:function(e){return t.goMall()}}},[i("div",{staticClass:"point_mall_router_left"},[i("div",[i("img",{attrs:{src:n("4sbH")}})]),t._v(" "),i("span",[t._v("积分商城")])]),t._v(" "),i("div",[i("img",{attrs:{src:n("bU9e")}})])]),t._v(" "),i("ul",{staticClass:"list-container"},t._l(t.integralList,function(e,n){return i("li",{key:n,staticClass:"list-item"},[i("span",{class:{change:"兑换"===e.update_type,reduce:"扣减"===e.update_type,give:"赠送"===e.update_type,work:"任务"===e.update_type}},[t._v(t._s(e.update_type))]),t._v(" "),i("span",[t._v(t._s(e.detail||"暂无"))]),t._v(" "),e.add>0?i("span",[t._v(t._s("+"+e.add))]):i("span",[t._v(t._s(e.add))]),t._v(" "),i("span",[t._v(t._s(e.created_at))]),t._v(" "),i("div",{staticClass:"line"})])}),0),t._v(" "),i("span",{staticClass:"spinner",attrs:{slot:"infinite-spinner"},slot:"infinite-spinner"},[t._v("加载中...")])])],1)},staticRenderFns:[]};var l=n("VU/8")(r,o,!1,function(t){n("UTio")},"data-v-44dbc8b6",null);e.default=l.exports},UTio:function(t,e){},bU9e:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAICAYAAAAx8TU7AAAAX0lEQVQYV2OceeYMqxIDh6Sric4jBihg3H/8usJ/pp+Hmf8yedlb6V0GiTOCiH0nL7gz/GeY+Y+ZycnFVO8eWBAscepC2P//DC3/GX5a4hbE0L7/+HmF/0yMqBZhcxIASdYzyybuPeQAAAAASUVORK5CYII="},mzKL:function(t,e,n){"use strict";var i=n("Zx67"),s=n.n(i),a=n("Zrlr"),r=n.n(a),o=n("wxAW"),l=n.n(o),c=n("zwoO"),u=n.n(c),d=n("Pf15"),g=n.n(d),h=n("fZjL"),p=n.n(h),f=n("//Fk"),A=n.n(f),v=n("mtWM"),m=n.n(v),w=n("7+uW"),L=n("QmSG"),O=m.a.create({baseURL:L.a.API_URL,timeout:1e5});O.interceptors.request.use(function(t){return t.headers.Authorization=window.WB.getCookie("stuAppToken"),t},function(t){console.log("request err:",t.response),A.a.reject(t),w.a.loading.off()}),O.interceptors.response.use(function(t){return w.a.loading.off(),102===t.data.code&&w.a.toast("token过期,请退出重新登录"),t.data.ok=200===t.data.status_code,t},function(t){return w.a.loading.off(),console.log("response err:",t.response),A.a.reject(t)});var x=O,k=function(t){function e(){r()(this,e);var t=u()(this,(e.__proto__||s()(e)).call(this));return t.goodsListUrl="/student/point/commodity/list",t.getGoodsUrl="/student/point/commodity/exchange",t.integralListUrl="/student/point/detail-list",t.studentInfoUrl="/student/person/info",t.permissionUrl="/schools/permissions",t}return g()(e,t),l()(e,[{key:"getGoodsList",value:function(t){return this.sendGet(this.goodsListUrl,t).then(function(t){return t})}},{key:"getGoods",value:function(t){return this.sendPost(this.getGoodsUrl,t).then(function(t){return t})}},{key:"getStudentIntegral",value:function(t){return this.sendGet(this.integralListUrl,t).then(function(t){return t})}},{key:"getStudentInfo",value:function(t){return this.sendGet(this.studentInfoUrl,t).then(function(t){return t})}},{key:"getPermission",value:function(){return this.sendGet(this.permissionUrl).then(function(t){return t})}}]),e}(function(){function t(){r()(this,t),this.$toast=w.a.toast}return l()(t,[{key:"sendGet",value:function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];return x.get(t,{params:e}).then(function(t){return t.data}).catch(function(t){return t.response})}},{key:"sendPost",value:function(t,e){return x.post(t,e).then(function(t){return t.data}).catch(function(t){return t.response})}},{key:"handleError",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.rlt&&"false"!==t.rlt&&!e.errorOnly&&this.$toast(e.success||"操作成功")}},{key:"handleService",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.ok&&!e.errorOnly&&this.$toast(e.success||"操作成功")}},{key:"parseUrl",value:function(t,e){return p()(e).forEach(function(n){var i=new RegExp("\\{"+n+"\\}");t=t.replace(i,e[n])}),t}}]),t}());e.a=new k},sVYa:function(t,e){!function(t,e){var n,i=t.document,s=i.documentElement,a=i.querySelector('meta[name="viewport"]'),r=i.querySelector('meta[name="flexible"]'),o=0,l=0,c=e.flexible||(e.flexible={});if(a){console.warn("将根据已有的meta标签来设置缩放比例");var u=a.getAttribute("content").match(/initial\-scale=([\d\.]+)/);u&&(l=parseFloat(u[1]),o=parseInt(1/l))}else if(r){var d=r.getAttribute("content");if(d){var g=d.match(/initial\-dpr=([\d\.]+)/),h=d.match(/maximum\-dpr=([\d\.]+)/);g&&(o=parseFloat(g[1]),l=parseFloat((1/o).toFixed(2))),h&&(o=parseFloat(h[1]),l=parseFloat((1/o).toFixed(2)))}}if(!o&&!l){t.navigator.appVersion.match(/android/gi);var p=t.navigator.appVersion.match(/iphone/gi),f=t.devicePixelRatio;l=1/(o=p?f>=3&&(!o||o>=3)?3:f>=2&&(!o||o>=2)?2:1:1)}if(s.setAttribute("data-dpr",o),!a)if((a=i.createElement("meta")).setAttribute("name","viewport"),a.setAttribute("content","initial-scale="+l+", maximum-scale="+l+", minimum-scale="+l+", user-scalable=no"),s.firstElementChild)s.firstElementChild.appendChild(a);else{var A=i.createElement("div");A.appendChild(a),i.write(A.innerHTML)}function v(){var e=s.getBoundingClientRect().width;e/o>540&&(e=540*o);var n=e/10;s.style.fontSize=n+"px",c.rem=t.rem=n}t.addEventListener("resize",function(){clearTimeout(n),n=setTimeout(v,300)},!1),t.addEventListener("pageshow",function(t){t.persisted&&(clearTimeout(n),n=setTimeout(v,300))},!1),"complete"===i.readyState?i.body.style.fontSize=12*o+"px":i.addEventListener("DOMContentLoaded",function(t){i.body.style.fontSize=12*o+"px"},!1),v(),c.dpr=t.dpr=o,c.refreshRem=v,c.rem2px=function(t){var e=parseFloat(t)*this.rem;return"string"==typeof t&&t.match(/rem$/)&&(e+="px"),e},c.px2rem=function(t){var e=parseFloat(t)/this.rem;return"string"==typeof t&&t.match(/px$/)&&(e+="rem"),e}}(window,window.lib||(window.lib={}))},sjts:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAAB4CAMAAAAqj4tlAAAAOVBMVEXp7/Pt8vXp8PTr8/jt8/Xu9Pfo7/RHcEzx9fjl7vLz+Pvo9frz+Pvv9/qu5/7x9/qo5v/7/P3f6/JDAtobAAAAD3RSTlNMOGz8JRNdAEuA4JDIrMyfU51mAAAFFUlEQVR42s2ci5KjIBBFGwQCAjH6/x+74isa5dEgzt5sqpytkZzpvt2iQeFVJM4ZI4QASCkBxi3GOC8aEQpgGHEcZwFh/GmgEUaGlQsFWTQgUwQ5THigaGyOcaoNlBicfZhqAqFxJrFaQHk4SKR0IJ6N4xLHbwciskzkXiAGsljsRiAi7xBJBGJ0FKnlHqyT4KX7SWb5ZT4eKX8l7wKScSKg/SI788i6ihoJ2hWon34XKgNFjQQbTw8PBChO9BOhB4AiRKBWHvN6JGUxInjZmadlj5g6SjQaB/QosTUdV/brG56vtVinZk8TRQ8ddXLo79nw0HHsRPS/AXmNHQdizxo7DlStM/E8IPJwN4L1HP1ajFTsj8wLxMs+VmlrWidjtcLs6AUqsInQpum+6ruutbQkaVBUR8p0VzI6vz1CgW9V2/nU6twQ5UdImC6kluaVfvY0UTddRDYrRJDZjG0XlxEZLoLlEhQj6yvJUaZLUSvwvejcqcvtgyKKArHb4pNGxGJA5B7/bD7C2hrwE0TdYWSRlQ/ojIkGBdRRXM4AnTGL4+laXM4AW2O0w0qj6gywGTNooBaVMyyQ6PAKz5GAhIDgbgcllH4QKJqxNgOowZgIcF0oJ2OxnB07EeAspLOALMLVgOtCNgsIYyIk0E/RD8PQbFvD4phtK7XwA0CAA3IUM1Fz3BpQrgY/ELLIvkDDhnEF1CHKDHCH+jpA/C6g5vvZx60G14gKgH5M3TTNaWu/mXg0ywcCk1P1vckFih/rqzTGQ2f0A11Oz1UWkEZ8ce1NGVX0tmMZLY+QUE63zM/ink6I0MxzIqI0y0RBCwklZBSIqlXiuK9StMEDiSDP+CGRshdqp599lbJLW84OEFWHH9wfGQY68OxitPy//SwaGoSlxVYjhzHnIf1Ar0O6foimH/T789WQGCBBt4HEfsz1T6eB6YdQZ4kdz+eolAk13aWf7sfcPisAJNWV6Ba4H56kGF0OORLtQP1A9HpvSsX4T4j3L9AnwUeaUs+wqwITNPjlEMKtvgM5rScQn7P6uIeWxQjjWB600CR/A/lifKUvgOKH+va0TMKR7YECp0FcCPDrfQGUkDN6PdrGRXnoVBpiQEM/TO++T7R1r0NjjlihM9cXiQJ9uvndNKl1ZiCs8NWP0J4YD7XWbPNvEQbiISAe2pMmA7XaFYTQdoJSYaDwFbS4iQ6y5sLVZkcglDU2OGjkkl4wZ6dO/R5dqWx7SJUW54aRbqHzZWGUiVZ3UOWWa2hFAa/YhXNEyt4Ht0rIEol+tRDYeWR4f6Es3KHoVwuhnE1mFfrtpOAexb8NIvCkEr6e4s8CHZYJXK9seDZErhjk9JodDlfrXv9O7HLtR2qIxCy6ey2S+R6HFz5EIjopXad5eCB+uTomHCKVLnpPhGKFJhJC5FYgZ2SOeNYPJRea2Hz0NVCBp4l3QVO9OiLML+5fYVWtO0ZXnfuWfJE/4vGvQSP/GxCv1Inz71pg/1mEKhEV3ddRxUa8AKgOEZm1uEma8SSOJ6/0rDk1muwkdqvvU4B4TSIXo6bvxldP09fCkqohIo5mfFvM4tx6RA5ojhAGqB7RnLIpQhQDVG2OzSdTuwilm7riUYTwnLK/N21Jt+Al3xJYv0fjbpos7kg33zRZGiRy/22lRUhVbrzNN3e1W5OzokSq3rw9395eESf7AQCJNI88AGBhIjVoXiUPkeB+qD94iMSOyj1mg2yz0+LHbPwDhSLPnviWXEYAAAAASUVORK5CYII="}});