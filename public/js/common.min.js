function tagCloud(){tagcloud({selector:"#sidebarPage .cloud",fontsize:16,radius:65,mspeed:"normal",ispeed:"normal",direction:135,keep:!1})}function getCookie(e){if(0<document.cookie.length){var t=document.cookie.indexOf(e+"=");if(-1!=t)return t=t+e.length+1,c_end=document.cookie.indexOf(";",t),-1==c_end&&(c_end=document.cookie.length),unescape(document.cookie.substring(t,c_end))}return!1}function goLogin(e,t){e.$confirm(t,"提示",{confirmButtonText:"去登录",cancelButtonText:"暂不登录",type:"warning"}).then(function(){var e=window.location.pathname;window.location.href="/login?originalUrl="+e}).catch(function(){})}function dateYmdHis(e){var t=new Date(Number(e));return t.getFullYear()+"."+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+".")+(t.getDate()<10?"0"+t.getDate()+" ":t.getDate()+" ")+(" "+t.getHours()+":")+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())}function dateYmd(e){var t=new Date(Number(e));return t.getFullYear()+"."+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+".")+(t.getDate()<10?"0"+t.getDate():t.getDate())}function dateMd(e){var t=new Date(Number(e));return(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"月"+(t.getDate()<10?"0"+t.getDate()+"日":t.getDate()+"日")}function searchMonitor(){var e=$("#headerPage");if(!e.length)return!1;var t=e.find(".search input"),n=e.find(".search .magnifying");t.on("focus",function(){t.parent(".search").addClass("active")}),t.on("blur",function(){t.parent(".search").removeClass("active")}),n.on("click",function(){window.location.href="/search?key="+t.val()}),t.keypress(function(e){13==e.which&&(window.location.href="/search?key="+t.val())})}function loadScript(e,t){var n=document.createElement("script");n.type="text/javascript",void 0!==t&&(n.readyState?n.onreadystatechange=function(){"loaded"!=n.readyState&&"complete"!=n.readyState||(n.onreadystatechange=null,t())}:n.onload=function(){t()}),n.src=e,document.body.appendChild(n)}function didiPlay(){$("#didiAudio")[0].play()}function socketRun(){if(!getCookie("userId"))return!1;if(-1!=window.location.href.indexOf("/notify/chat"))return!1;if(-1!=window.location.host.indexOf("localhost"))var t="127.0.0.1:3001";else t="taohuayuanskill.com";loadScript("https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.js",function(){var e=io.connect(t,{path:"/socket"});e.on("connect",function(){e.emit("join",getCookie("userId"))}),e.on("message",function(e){$vue.$notify({type:"info",title:"消息",message:e,offset:50})}),e.on("server_message",function(e){var t=JSON.parse(e);$vue.$notify({type:"info",title:"您有一条新的消息",message:t.text,offset:50,onClick:function(){window.location.href="/notify/chat"}}),didiPlay()})})}$(function(){window.$vue=new Vue({}),searchMonitor(),socketRun()});