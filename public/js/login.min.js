new Vue({el:"#loginPage",data:{cut_flag:1,login_phone:"",login_password:"",register_name:"",register_phone:"",register_password:"",originalUrl:""},created:function(){},mounted:function(){this.init()},methods:{init:function(){this.originalUrl=$("#originalUrl").val()},cut:function(e){this.cut_flag=e},thirdParty:function(e){var i=this;switch(e){case 1:i.weibo_login();break;case 2:i.weixin_login();break;default:i.weixin_login()}},register:function(){if(this.register_name.length<2)return this.$message.warning("昵称长度必须大于2位"),!1;if(!/^1[3|4|5|6|7|8|9][0-9]\d{8}$/.test(this.register_phone))return this.$message.warning("请输入正确的手机号"),!1;if(this.register_password.length<6)return this.$message.warning("密码长度必须大于6位"),!1;var i=this;$.ajax({url:"/api/register",type:"post",data:{user_name:this.register_name,user_phone:this.register_phone,user_password:this.register_password},dataType:"json",success:function(e){200==e.code?(i.login_phone=i.register_phone,i.login_password=i.register_password,i.login()):i.$message.warning(e.body)},error:function(){i.$message.error("当前网络不佳，请稍后重试")}})},login:function(){var i=this;$.ajax({url:"/api/login",type:"post",data:{user_phone:this.login_phone,user_password:this.login_password},dataType:"json",success:function(e){200==e.code?""!=i.originalUrl?window.location.href=i.originalUrl:window.location.href="/":(1==e.code&&(i.cut_flag=2),i.$message.warning(e.body))},error:function(){i.$message.error("当前网络不佳，请稍后重试")}})},weibo_login:function(){this.$message.warning("暂不支持微博登录")},weixin_login:function(){this.$message.warning("暂不支持微信登录")}}});