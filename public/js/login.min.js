new Vue({el:"#loginPage",data:{cut_flag:1,login_phone:"",login_password:"",register_name:"",register_phone:"",register_password:""},created:function(){},mounted:function(){},methods:{cut:function(e){this.cut_flag=e},thirdParty:function(){this.$message.warning("暂不支持第三方登录")},register:function(){if(this.register_name.length<2)return this.$message.warning("昵称长度必须大于2位"),!1;if(!/^1[3|4|5|6|7|8|9][0-9]\d{8}$/.test(this.register_phone))return this.$message.warning("请输入正确的手机号"),!1;if(this.register_password.length<6)return this.$message.warning("密码长度必须大于6位"),!1;var s=this;$.ajax({url:"/api/register",type:"post",data:{user_name:this.register_name,user_phone:this.register_phone,user_password:this.register_password},dataType:"json",success:function(e){200==e.code?(s.login_phone=s.register_phone,s.login_password=s.register_password,s.login()):s.$message.warning(e.body)},error:function(){s.$message.error("当前网络不佳，请稍后重试")}})},login:function(){var r=this;$.ajax({url:"/api/login",type:"post",data:{user_phone:this.login_phone,user_password:this.login_password},dataType:"json",success:function(e){if(200==e.code){var s=window.localStorage.getItem("loginHref");window.location.href=""!=s&&null!=s?s:"/",window.localStorage.setItem("loginHref","")}else 1==e.code&&(r.cut_flag=2),r.$message.warning(e.body)},error:function(){r.$message.error("当前网络不佳，请稍后重试")}})}}});