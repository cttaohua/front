new Vue({delimiters:["${","}"],el:"#searchPage",data:{key:"",page:1,type:1,searchList:[],total:0,latelyKey:[]},created:function(){},mounted:function(){this.init(),this.getList()},methods:{init:function(){this.key=$("#key").val(),this.getlatelyKey()},getlatelyKey:function(){var e=window.localStorage.getItem("latelyKey");if(""!=this.key){if(""==e||null==e)e=JSON.stringify([this.key]);else{var t=JSON.parse(e);-1==$.inArray(this.key,t)&&t.unshift(this.key),e=JSON.stringify(t)}window.localStorage.setItem("latelyKey",e)}""!=e&&null!=e&&(this.latelyKey=JSON.parse(window.localStorage.getItem("latelyKey")))},clearAll:function(){this.latelyKey=[],window.localStorage.setItem("latelyKey","")},clearThis:function(e){this.latelyKey.splice(e,1);var t=JSON.parse(window.localStorage.getItem("latelyKey"));if(t.splice(e,1),t.length)var i=JSON.stringify(t);else i="";window.localStorage.setItem("latelyKey",i)},sequence:function(e){this.type=e,this.page=1,this.getList()},pageChange:function(e){this.page=e,this.getList()},getList:function(){var t=this;$.ajax({url:"/api/search",type:"get",dataType:"json",data:{key:this.key,type:this.type,page:this.page},success:function(e){200==e.code?(t.total=e.body.count,t.searchList=e.body.list):t.searchList=[]},error:function(){t.$message.error("当前网络不佳，请稍后重试")}})}}});